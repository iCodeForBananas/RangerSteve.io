import GameConsts from 'lib/GameConsts'
import KillCurrentPlayer from '../KillCurrentPlayer.js'
import CreateSpawnPointVisuals from '../CreateSpawnPointVisuals'

const WORLD_WIDTH = 3232
const WORLD_HEIGHT = 2400

const polygonPoints = [[[320,415],[608,415],[608,447],[574,480],[566,511],[558,499],[539,526],[526,497],[511,513],[495,498],[490,512],[478,480],[465,525],[455,506],[449,512],[444,526],[438,523],[428,533],[428,543],[423,541],[418,543],[359,489],[352,511],[334,464],[319,450]],[[1472,575],[1761,576],[1728,609],[1504,609]],[[989,2271],[1310,2271],[1315,2386],[992,2389]],[[1918,2271],[2238,2272],[2239,2383],[1919,2386]],[[3,0],[830,0],[799,33],[94,32],[32,97],[32,702],[97,702],[96,737],[62,736],[31,768],[33,990],[286,990],[383,894],[384,1088],[319,1089],[318,1056],[62,1056],[31,1088],[31,1280],[63,1311],[33,1343],[32,1407],[287,1406],[384,1504],[385,1569],[287,1472],[32,1471],[33,1856],[15,1873],[3,1859]],[[319,1151],[383,1151],[384,1217],[287,1312],[224,1313],[255,1279],[255,1183],[319,1182]],[[543,1503],[639,1406],[929,1406],[864,1472],[637,1473],[545,1567]],[[1535,1823],[1695,1824],[1696,1857],[1664,1888],[1666,1919],[1649,1937],[1631,1919],[1616,1935],[1600,1921],[1583,1937],[1567,1921],[1567,1888],[1535,1857]],[[1568,991],[1665,992],[1729,1056],[1728,1120],[1664,1120],[1665,1344],[1728,1344],[1728,1378],[1666,1443],[1649,1428],[1634,1442],[1618,1428],[1601,1443],[1585,1426],[1568,1440],[1505,1375],[1506,1346],[1569,1345],[1569,1122],[1505,1122],[1505,1059]],[[223,1695],[608,1694],[703,1598],[864,1599],[927,1664],[862,1663],[767,1760],[285,1761]],[[2302,1406],[2591,1408],[2687,1502],[2686,1567],[2590,1472],[2365,1472]],[[2366,1599],[2526,1599],[2622,1694],[3005,1695],[2942,1761],[2462,1759],[2366,1664],[2302,1665]],[[2846,1151],[2909,1152],[2910,1183],[2974,1183],[2973,1279],[3004,1310],[2941,1310],[2845,1215]],[[2621,414],[2910,415],[2910,448],[2895,464],[2877,509],[2871,491],[2813,544],[2774,505],[2768,525],[2750,482],[2739,512],[2734,496],[2719,513],[2702,498],[2693,529],[2685,510],[2669,496],[2665,511],[2653,482],[2621,448]],[[2335,608],[2526,798],[2589,799],[2687,894],[2687,1216],[2591,1311],[2525,1312],[2621,1215],[2621,926],[2556,863],[2495,864],[2333,704]],[[895,607],[894,702],[736,863],[671,863],[608,927],[608,1215],[702,1311],[638,1313],[543,1214],[543,892],[640,798],[703,798]],[[2399,0],[3230,0],[3231,1854],[3216,1870],[3196,1855],[3197,1471],[2942,1472],[2845,1569],[2845,1504],[2941,1407],[3196,1406],[3197,1342],[3166,1312],[3198,1280],[3198,1088],[3166,1056],[2910,1056],[2909,1087],[2844,1088],[2845,894],[2942,990],[3197,992],[3197,768],[3166,734],[3134,735],[3134,703],[3198,704],[3197,94],[3133,31],[2430,31]]]

export function preload () {
  this.game.load.image('background', '/maps/evil-underground/background.jpg', true)
}

export function create () {
  this.game.world.setBounds(0, 0, WORLD_WIDTH, WORLD_HEIGHT)
  this.game.add.tileSprite(0, 0, WORLD_WIDTH, WORLD_HEIGHT, 'background')

  window.RS.groundPolygons = this.game.add.group()
  this.game.arcadePolygons.enableGroup(window.RS.groundPolygons, polygonPoints, this)

  if (GameConsts.DEBUG) CreateSpawnPointVisuals.call(this, GameConsts.MAP_SPAWN_POINTS.EvilUnderground)
}

export function update () {
  return
  this.game.physics.arcade.overlap(window.RS.player, window.RS.groundSprite, () => {
    KillCurrentPlayer.call(this)
  })
}
